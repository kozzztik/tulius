<div>
    <b-modal hide-header size="lg" centered scrollable ref="modal"
             footer-class="justify-content-between">
        <div class="row">
            <div class="col px-1" v-for="image, index in user_images" :key="image.id"
                 style="flex-basis: 100px;">
                <div class="card" :class="(selected == image)? 'border-primary' : 'border-secondary'"
                     @click="(selected==image) ? selected=null : selected=image">
                    <img :src="image.thumb" class="card-img-top">
                    <h6 class="px-1 my-0 text-muted" v-if="selected != image">
                       {{image.file_name}}
                    </h6>
                    <a href="javascript:void(0)" v-if="selected == image"
                       class="btn btn-success w100 p-1" @click.prevent.stop="tiny_index=index">
                        Просмотр
                    </a>
                </div>
            </div>
        </div>
        <template v-slot:modal-footer>
            <b-form-file placeholder="" size="sm" browse-text="Загрузить"
                         accept="image/*" v-model="uploaded_file" style="width: 6em;"></b-form-file>
            <div>
                <input type="checkbox" v-model="add_as_attach" v-if="false">
                <label class="col-form-label" v-if="false">Добавить как вложение</label>
            </div>
            <div>
                <button type="button" class="btn btn-secondary" @click="$refs.modal.hide()">Отмена</button>
                <button type="button" class="btn btn-primary" :class="selected ? '' : 'disabled'"
                        @click="if (selected) do_add(selected)">OK</button>
            </div>
        </template>
        <Tinybox v-model="tiny_index" :images="tiny_images"></Tinybox>
    </b-modal>
</div>