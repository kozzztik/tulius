<div>
    <div class="content" v-for="group in index.groups">
        <div class="caption" align="center">
            <div class="captionleft"></div>
            <div class="captioncontent">
                <a v-if="index.is_superuser" :href="group.url">
                    {{ group.title }}
                </a>
                <span v-else="index.is_superuser">{{ group.title }}</span>
            </div>
            <div class="captionright"></div>
        </div>
        <a v-if="(!index.is_anonymous) && group.unreaded" :href="group.unreaded.url">
            <div class="room_group_read_mark not_readed"></div>
        </a>
        <div v-if="(!index.is_anonymous) && (!group.unreaded)" class="room_group_read_mark"></div>
        <div v-if="!index.is_anonymous" class="thread_collapse" v-on:click="collapse" :groupid="group.id">
            {{ group.collapsed ? "+" : "-" }}
        </div>

        <table class="table forum-room-list" v-if="!group.collapsed">
            <thead>
                <tr>
                    <th width="40">&nbsp;</th>
                    <th>Комната</th>
                    <th class="hidden-phone" width="80">Тем</th>
                    <th class="miniphone-hidden" width="80">сообщ.</th>
                    <th class="miniphone-hidden" width="200">последнее сообщ.</th>
                </tr>
            </thead>
            <tbody>
                <tr v-for="room in group.rooms">
                    <td class="forum-post-icon">
                        <div v-if="room.unreaded">
                            <a :href="room.unreaded">
                                <img src="/static/forum/img/unreadedmark.gif">
                            </a>
                        </div>
                        <img v-else="room.unreaded" src="/static/forum/img/readedmark.gif">
                    </td>
                    <td>
                        <div class="forum-post-description">
                            <h4>
                                <a :href="room.url">{{ room.title }}</a>
                            </h4>
                            <div class=".hidden-phone" v-if="room.body">
                                {{ room.body }}
                            </div>
                            <h6 v-if="room.moderators.length > 0" class="moderators">Модераторы:</h6>
                            <ul v-if="room.moderators" class="moderators">
                                <li v-for="moderator in room.moderators">
                                    <a :href="moderator.url">{{ moderator.title }}</a>&nbsp;
                                </li>
                            </ul>
                            <h6 v-if="room.accessed_users" class="moderators">Открыта для:</h6>
                            <ul v-if="room.accessed_users" class="moderators">
                                <li v-for="accessed_user in room.accessed_users">
                                    <a :href="accessed_user.url">{{ accessed_user.title }}</a>
                                </li>
                            </ul>
                        </div>
                    </td>
                    <td class="hidden-phone">{{ room.threads_count }}</td>
                    <td class="miniphone-hidden">{{ room.comments_count }}</td>
                    <td class="miniphone-hidden">
                        <div v-if="room.last_comment">
                            <a :href="room.last_comment.url">
                                {{ room.last_comment.user.title }}
                            </a>
                            <br>
                            {{ room.last_comment.create_time }}
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
